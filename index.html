<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/09/hello-world/" class="article-date">
  <time class="dt-published" datetime="2022-06-09T02:36:37.590Z" itemprop="datePublished">2022-06-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/09/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/09/hello-world/" data-id="cl46q1ovb0001569keyvueywr" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2016-11-11-DNS-Message-Format" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/06/08/2016-11-11-DNS-Message-Format/" class="article-date">
  <time class="dt-published" datetime="2022-06-08T10:19:43.745Z" itemprop="datePublished">2022-06-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/DNS/">DNS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2022/06/08/2016-11-11-DNS-Message-Format/">DNS 的报文格式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>DNS 的报文格式</p>
<h1 id="DNS-报文总体格式"><a href="#DNS-报文总体格式" class="headerlink" title="DNS 报文总体格式"></a>DNS 报文总体格式</h1><p>DNS 定义了一个用于查询和响应的报文格式。图 14-3 显示这个报文的总体格式。</p>
<p><img src="http://jaminzhang.github.io/images/DNS/01-DNS-Message-General-Format.png" alt="DNS-Message-General-Format">  </p>
<p><img src="http://www.tcpipguide.com/free/diagrams/dnsgenformat.png" alt="DNS General Message Format">  </p>
<p>这个报文由 12 字节长的首部和 4 个长度可变的字段组成。</p>
<p>DNS 报文 12 字节长的首部格式如下图所示。</p>
<p><img src="http://www.tcpipguide.com/free/diagrams/dnsheaderformat.png" alt="DNS Message Header Format">  </p>
<p>标识字段由客户程序设置并由服务器返回结果。<br>客户程序通过它来确定响应与查询是否匹配。</p>
<p>16 bit 的标志字段被划分为若干子字段，如图 14-4 所示。</p>
<p><img src="http://jaminzhang.github.io/images/DNS/02-DNS-Message-Header-Flags-Codes.png" alt="DNS-Message-Header-Flags-Codes">  </p>
<p>我们从最左位开始依次介绍各子字段：</p>
<ul>
<li>QR(Query&#x2F;Response Flag) 是 1 bit 字段：0 表示查询报文，1 表示响应报文。</li>
<li>opcode 是一个 4 bit 字段：通常值为 0（标准查询），其他值为 1（反向查询）和 2（服务器状态请求）。</li>
<li>AA 是 1 bit 标志，表示 “授权回答(Authoritative Answer)” 。该名字服务器是授权于该域的。</li>
<li>TC 是 1 bit字段，表示 “可截断的(Truncated)”。使用 UDP 时，它表示当应答的总长度超过 512 字节时，只返回前 512 个字节。</li>
<li>RD 是 1 bit字段 表示 “期望递归(Recursion Desired)”。<br>该比特能在一个查询中设置，并在响应中返回。<br>这个标志告诉名字服务器必须处理这个查询，也称为一个递归查询。<br>如果该位为 0，且被请求的名字服务器没有一个授权回答，它就返回一个能解答该查询的其他名字服务器列表，这称为迭代查询。<br>在后面的例子中，我们将看到这两种类型查询的例子。</li>
<li>RA 是 1 bit 字段，表示 “可用递归(Recursion Available)”。<br>如果名字服务器支持递归查询，则在响应中将该比特设置为 1。<br>在后面的例子中可看到大多数名字服务器都提供递归查询，除了某些根服务器。</li>
<li>随后的 3 bit 字段必须为 0。</li>
<li>rcode(Response Code) 是一个 4 bit 的返回码字段。通常的值为 0（没有差错）和 3（名字差错）。<br>名字差错只能从一个授权名字服务器上返回，它表示在查询中指定的域名不存在。</li>
</ul>
<p>随后的 4 个 16 bit 字段说明最后 4 个变长字段中包含的条目数。<br>对于查询报文，问题(question)数通常是 1，而其他 3 项则均为 0。<br>类似地，对于应答报文，回答数至少是 1，剩下的两项可以是 0 或非 0。</p>
<h1 id="DNS-查询报文中的问题部分"><a href="#DNS-查询报文中的问题部分" class="headerlink" title="DNS 查询报文中的问题部分"></a>DNS 查询报文中的问题部分</h1><p>问题部分中每个问题的格式如图 14-5 所示，通常只有一个问题。  </p>
<p><img src="http://jaminzhang.github.io/images/DNS/03-DNS-Query-Message-Question-Section-Format.png" alt="DNS-Query-Message-Question-Section-Format"><br><img src="http://www.tcpipguide.com/free/diagrams/dnsquestionformat.png" alt="DNS Message Question Section Format">  </p>
<p>查询名(QName)是要查找的名字，它是一个或多个标识符的序列。<br>每个标识符以首字节的计数值来说明随后标识符的字节长度，<br>每个名字以最后字节为 0 结束，长度为 0 的标识符是根标识符。<br>计数字节的值必须是 0 ~ 63 的数，因为标识符的最大长度仅为 63<br>（在本节的后面我们将看到计数字节的最高两比特为 1，即值 192 ~ 255，将用于压缩格式）。<br>不像我们已经看到的许多其他报文格式，该字段无需以整 32 bit 边界结束，即无需填充字节。</p>
<p>图 14-6 显示了如何存储域名 gemini.tuc.noao.edu。</p>
<p><img src="http://jaminzhang.github.io/images/DNS/04-DNS-Domain-Name-Representation.png" alt="DNS-Domain-Name-Representation">  </p>
<p>每个问题有一个查询类型(QType)，而每个响应（也称一个资源记录，我们下面将谈到）也有一个类型。<br>大约有 20 个不同的类型值，其中的一些目前已经过时。<br>图 14-7 显示了其中的一些值。<br>查询类型是类型的一个超集( superset )：图中显示的类型值中只有两个能用于查询类型。</p>
<p><img src="http://jaminzhang.github.io/images/DNS/05-DNS-Type-Value.png" alt="DNS-Type-Value">  </p>
<p>最常用的查询类型是 A 类型，表示期望获得查询名的 IP 地址。<br>一个 PTR 查询则请求获得一个 IP 地址对应的域名。这是一个指针查询，我们将在 14.5 节介绍。<br>其他的查询类型将在 14.6 节介绍。</p>
<p>查询类(QClass)通常是 1，指互联网地址（某些站点也支持其他非 IP 地址）。</p>
<h1 id="DNS-响应报文中的资源记录部分"><a href="#DNS-响应报文中的资源记录部分" class="headerlink" title="DNS 响应报文中的资源记录部分"></a>DNS 响应报文中的资源记录部分</h1><p>DNS 报文中最后的三个字段，回答字段、授权字段和附加信息字段，<br>均采用一种称为资源记录RR（Resource Record）的相同格式。<br>图 14-8 显示了资源记录的格式。</p>
<p><img src="http://jaminzhang.github.io/images/DNS/06-DNS-Resource-Records-Format.png" alt="DNS-Resource-Records-Format"><br><img src="http://www.tcpipguide.com/free/diagrams/dnsrrformat.png" alt="DNS Common Resource Record Format">  </p>
<ul>
<li>域名是记录中资源数据对应的名字。它的格式和前面介绍的查询名字段格式（图 14-6）相同。</li>
<li>类型说明 RR 的类型码。它的值和前面介绍的查询类型值是一样的。类通常为 1，指 Internet 数据。</li>
<li>生存时间字段是客户程序保留该资源记录的秒数。资源记录通常的生存时间值为 2 天。</li>
<li>资源数据长度说明资源数据的数量。该数据的格式依赖于类型字段的值。对于类型 1（A 记录）资源数据是 4 字节的 IP 地址。</li>
</ul>
<h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h1><p>[《TCP&#x2F;IP 详解 卷 1：协议》14.3 DNS 的报文格式]<br><a target="_blank" rel="noopener" href="http://www.tcpipguide.com/free/t_DNSMessagingandMessageResourceRecordandMasterFileF.htm">DNS Messaging and Message, Resource Record and Master File Formats</a>  </p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2022/06/08/2016-11-11-DNS-Message-Format/" data-id="cl46q1ov40000569k4es96w7m" data-title="DNS 的报文格式" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Network/" rel="tag">Network</a></li></ul>

    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DNS/">DNS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Network/" rel="tag">Network</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Network/" style="font-size: 10px;">Network</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">June 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/06/09/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2022/06/08/2016-11-11-DNS-Message-Format/">DNS 的报文格式</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2022 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>